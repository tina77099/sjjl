<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修复后的标签选择器测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-8">
        <h1 class="text-3xl font-bold text-center mb-8">修复后的标签选择器测试</h1>
        
        <!-- 测试区域 -->
        <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold mb-4">简化版标签选择器（无重复显示）</h2>
            <div id="fixed-tag-selector" class="border-2 border-dashed border-gray-300 rounded-lg p-4 min-h-[200px]">
                <p class="text-gray-500 text-center">标签选择器将在这里显示</p>
            </div>
            
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold mb-2">测试说明：</h3>
                <ul class="text-sm text-gray-600 list-disc list-inside space-y-1">
                    <li>应该显示为3列网格布局的checkbox样式</li>
                    <li>勾选标签后，不应该在底部重复显示已选择标签</li>
                    <li>只在顶部显示选择计数</li>
                    <li>点击整个方框区域都可以选中/取消选中</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 引入依赖 -->
    <script src="js/storage-manager.js"></script>
    <script src="js/categories-manager.js"></script>
    <script src="js/tags-manager.js"></script>
    <script src="js/tag-selector.js"></script>

    <script>
        // 初始化管理器
        const storageManager = new StorageManager();
        const categoriesManager = new CategoriesManager(storageManager);
        const tagsManager = new TagsManager(storageManager);

        // 添加到全局
        window.storageManager = storageManager;
        window.categoriesManager = categoriesManager;
        window.tagsManager = tagsManager;

        // 等待页面加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化修复后的标签选择器
            const fixedTagSelector = new TagSelector('fixed-tag-selector', {
                scope: 'plan',
                showSearch: false,
                showCategories: false,
                maxSelection: 5
            });

            // 监听选择变化
            document.getElementById('fixed-tag-selector').addEventListener('tagSelectionChange', function(e) {
                console.log('标签选择变化:', e.detail);
                console.log('已选择的标签:', e.detail.selectedTags.map(tag => tag.name));
            });
        });
    </script>
</body>
</html> 