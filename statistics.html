<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统计分析 - 事件记录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Chart.js用于图表展示 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- 侧边栏 -->
    <div class="flex h-screen overflow-hidden">
        <div class="w-64 bg-white shadow-md hidden md:block">
            <div class="p-6">
                <h1 class="text-2xl font-bold text-indigo-600">事件记录</h1>
                <p class="text-gray-500 text-sm">记录生活，追踪成长</p>
            </div>
            <nav class="mt-6">
                <ul>
                    <li class="px-6 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                        <a href="index.html" class="flex items-center">
                            <i class="fas fa-home mr-3"></i>
                            <span>仪表盘</span>
                        </a>
                    </li>
                    <li class="px-6 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                        <a href="calendar.html" class="flex items-center">
                            <i class="fas fa-calendar-alt mr-3"></i>
                            <span>日历视图</span>
                        </a>
                    </li>
                    <li class="px-6 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                        <a href="events.html" class="flex items-center">
                            <i class="fas fa-list mr-3"></i>
                            <span>事件列表</span>
                        </a>
                    </li>
                    <li class="px-6 py-3 bg-indigo-50 text-indigo-600 font-medium">
                        <a href="statistics.html" class="flex items-center">
                            <i class="fas fa-chart-pie mr-3"></i>
                            <span>统计分析</span>
                        </a>
                    </li>
                    <li class="px-6 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                        <a href="tags.html" class="flex items-center">
                            <i class="fas fa-tag mr-3"></i>
                            <span>标签管理</span>
                        </a>
                    </li>
                    <li class="px-6 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">
                        <a href="settings.html" class="flex items-center">
                            <i class="fas fa-cog mr-3"></i>
                            <span>设置</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- 主内容区 -->
        <div class="flex-1 overflow-auto">
            <!-- 顶部导航栏 -->
            <header class="bg-white shadow-sm">
                <div class="flex items-center justify-between p-4">
                    <button class="md:hidden text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div class="flex items-center">
                        <div class="relative">
                            <input type="text" placeholder="搜索事件..." class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300 w-64">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                        </div>
                        <button class="ml-4 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                            <i class="fas fa-plus mr-2"></i>新建事件
                        </button>
                    </div>
                    <div class="flex items-center">
                        <button class="text-gray-600 mr-4">
                            <i class="fas fa-bell text-xl"></i>
                        </button>
                        <div class="flex items-center">
                            <a href="settings.html#profile-section" class="h-8 w-8 rounded-full bg-indigo-200 flex items-center justify-center text-indigo-600 font-medium hover:bg-indigo-300 transition-colors cursor-pointer" title="个人设置">
                                <i class="fas fa-user-circle"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 统计分析内容 -->
            <main class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">统计分析</h2>
                    <div class="flex items-center">
                        <select class="px-3 py-2 border rounded-lg bg-white mr-3">
                            <option value="week">本周</option>
                            <option value="month" selected>本月</option>
                            <option value="quarter">本季度</option>
                            <option value="year">本年</option>
                            <option value="custom">自定义</option>
                        </select>
                        <button class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors">
                            <i class="fas fa-download mr-2"></i>导出报告
                        </button>
                    </div>
                </div>
                
                <!-- 概览卡片 -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-indigo-100 p-3 rounded-full">
                                <i class="fas fa-calendar-check text-indigo-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">总事件数</h3>
                                <p class="text-2xl font-bold">42</p>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center text-sm">
                            <span class="text-green-600 font-medium">↑ 12%</span>
                            <span class="text-gray-500 ml-2">较上月</span>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-check-circle text-green-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">已完成</h3>
                                <p class="text-2xl font-bold">35</p>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center text-sm">
                            <span class="text-green-600 font-medium">↑ 8%</span>
                            <span class="text-gray-500 ml-2">较上月</span>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fas fa-clock text-yellow-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">进行中</h3>
                                <p class="text-2xl font-bold">5</p>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center text-sm">
                            <span class="text-red-600 font-medium">↓ 3%</span>
                            <span class="text-gray-500 ml-2">较上月</span>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-chart-line text-purple-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">完成率</h3>
                                <p class="text-2xl font-bold">83%</p>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center text-sm">
                            <span class="text-green-600 font-medium">↑ 5%</span>
                            <span class="text-gray-500 ml-2">较上月</span>
                        </div>
                    </div>
                </div>
                
                <!-- 图表区域 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- 事件分类统计 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">事件分类统计</h3>
                        </div>
                        <div class="p-6">
                            <div class="h-64">
                                <canvas id="categoryChart"></canvas>
                            </div>
                            <div class="grid grid-cols-2 gap-4 mt-6">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">工作 (45%)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">学习 (20%)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">健康 (15%)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                                    <span class="text-sm text-gray-600">生活 (20%)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 每日事件数量趋势 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">每日事件数量趋势</h3>
                        </div>
                        <div class="p-6">
                            <div class="h-64">
                                <canvas id="trendChart"></canvas>
                            </div>
                            <div class="mt-6">
                                <p class="text-sm text-gray-600">本月事件总数比上月增长了 <span class="text-green-600 font-medium">12%</span>，平均每日完成事件 <span class="font-medium">3.5</span> 个。</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 时间分配和完成率 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- 时间分配 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">时间分配</h3>
                        </div>
                        <div class="p-6">
                            <div class="h-64">
                                <canvas id="timeAllocationChart"></canvas>
                            </div>
                            <div class="mt-6">
                                <p class="text-sm text-gray-600">工作时间占比 <span class="font-medium">45%</span>，学习时间占比 <span class="font-medium">20%</span>，健康时间占比 <span class="font-medium">15%</span>，生活时间占比 <span class="font-medium">20%</span>。</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 每周完成率 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">每周完成率</h3>
                        </div>
                        <div class="p-6">
                            <div class="h-64">
                                <canvas id="completionRateChart"></canvas>
                            </div>
                            <div class="mt-6">
                                <p class="text-sm text-gray-600">本月第三周完成率最高，达到 <span class="font-medium">92%</span>。整体趋势呈上升状态，表现良好。</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 热门标签和时段分析 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- 热门标签 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">热门标签</h3>
                        </div>
                        <div class="p-6">
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">会议 (12)</span>
                                <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">项目 (9)</span>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">学习 (8)</span>
                                <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">健身 (7)</span>
                                <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">截止日期 (6)</span>
                                <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">客户 (5)</span>
                                <span class="px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm">家庭 (4)</span>
                                <span class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm">总结 (4)</span>
                                <span class="px-3 py-1 bg-teal-100 text-teal-800 rounded-full text-sm">培训 (3)</span>
                                <span class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">其他 (15)</span>
                            </div>
                            <div class="mt-6">
                                <h4 class="font-medium text-gray-700 mb-3">标签使用趋势</h4>
                                <div class="h-40">
                                    <canvas id="tagTrendChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 高效时段分析 -->
                    <div class="bg-white rounded-lg shadow">
                        <div class="p-6 border-b">
                            <h3 class="text-xl font-bold text-gray-800">高效时段分析</h3>
                        </div>
                        <div class="p-6">
                            <div class="h-64">
                                <canvas id="timeEfficiencyChart"></canvas>
                            </div>
                            <div class="mt-6">
                                <h4 class="font-medium text-gray-700 mb-2">高效时段建议</h4>
                                <ul class="space-y-2 text-sm text-gray-600">
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                        <span>上午9点-11点是您的黄金工作时段，建议安排重要任务</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                        <span>下午2点-4点适合创意和协作工作</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i>
                                        <span>晚上8点后效率明显下降，建议安排轻松活动</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 新建事件弹窗 -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="newEventModal">
        <div class="bg-white rounded-lg w-full max-w-md mx-4">
            <div class="p-6 border-b">
                <div class="flex items-center justify-between">
                    <h3 class="text-xl font-bold text-gray-800">新建事件</h3>
                    <button class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="eventTitle">
                            事件标题
                        </label>
                        <input type="text" id="eventTitle" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="输入事件标题">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="startDate">
                                开始时间
                            </label>
                            <input type="datetime-local" id="startDate" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300">
                        </div>
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="endDate">
                                结束时间
                            </label>
                            <input type="datetime-local" id="endDate" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300">
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="eventCategory">
                            事件分类
                        </label>
                        <select id="eventCategory" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300">
                            <option value="work">工作</option>
                            <option value="project">项目</option>
                            <option value="study">学习</option>
                            <option value="health">健康</option>
                            <option value="life">生活</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="eventLocation">
                            地点
                        </label>
                        <input type="text" id="eventLocation" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="输入事件地点">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="eventTags">
                            标签
                        </label>
                        <input type="text" id="eventTags" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="输入标签，用逗号分隔">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2" for="eventDescription">
                            事件描述
                        </label>
                        <textarea id="eventDescription" rows="3" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300" placeholder="输入事件描述"></textarea>
                    </div>
                    
                    <div class="flex items-center mb-4">
                        <input type="checkbox" id="setReminder" class="h-4 w-4 text-indigo-600 rounded">
                        <label for="setReminder" class="ml-2 text-gray-700 text-sm">
                            设置提醒
                        </label>
                    </div>
                    
                    <div class="flex justify-end">
                        <button type="button" class="px-4 py-2 text-gray-700 mr-2">
                            取消
                        </button>
                        <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            保存
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // 简单的交互逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const newEventBtn = document.querySelector('button.bg-indigo-600');
            const newEventModal = document.getElementById('newEventModal');
            const closeModalBtn = newEventModal.querySelector('button.text-gray-500');
            const cancelBtn = newEventModal.querySelector('button[type="button"]');
            
            newEventBtn.addEventListener('click', function() {
                newEventModal.classList.remove('hidden');
            });
            
            closeModalBtn.addEventListener('click', function() {
                newEventModal.classList.add('hidden');
            });
            
            cancelBtn.addEventListener('click', function() {
                newEventModal.classList.add('hidden');
            });
            
            // 移动端侧边栏切换
            const menuBtn = document.querySelector('button.md\\:hidden');
            const sidebar = document.querySelector('.w-64');
            
            menuBtn.addEventListener('click', function() {
                sidebar.classList.toggle('hidden');
            });
            
            // 初始化图表
            initCharts();
        });
        
        // 初始化所有图表
        function initCharts() {
            // 事件分类统计饼图
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['工作', '学习', '健康', '生活'],
                    datasets: [{
                        data: [45, 20, 15, 20],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(234, 179, 8, 0.8)',
                            'rgba(168, 85, 247, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    cutout: '70%'
                }
            });
            
            // 每日事件数量趋势线图
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['1日', '5日', '10日', '15日', '20日', '25日', '30日'],
                    datasets: [{
                        label: '事件数量',
                        data: [3, 5, 4, 6, 5, 7, 8],
                        borderColor: 'rgba(79, 70, 229, 0.8)',
                        backgroundColor: 'rgba(79, 70, 229, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // 时间分配条形图
            const timeAllocationCtx = document.getElementById('timeAllocationChart').getContext('2d');
            new Chart(timeAllocationCtx, {
                type: 'bar',
                data: {
                    labels: ['工作', '学习', '健康', '生活'],
                    datasets: [{
                        label: '小时数',
                        data: [45, 20, 15, 20],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(16, 185, 129, 0.8)',
                            'rgba(234, 179, 8, 0.8)',
                            'rgba(168, 85, 247, 0.8)'
                        ],
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // 每周完成率线图
            const completionRateCtx = document.getElementById('completionRateChart').getContext('2d');
            new Chart(completionRateCtx, {
                type: 'line',
                data: {
                    labels: ['第一周', '第二周', '第三周', '第四周'],
                    datasets: [{
                        label: '完成率',
                        data: [75, 82, 92, 85],
                        borderColor: 'rgba(16, 185, 129, 0.8)',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // 标签使用趋势
            const tagTrendCtx = document.getElementById('tagTrendChart').getContext('2d');
            new Chart(tagTrendCtx, {
                type: 'line',
                data: {
                    labels: ['第一周', '第二周', '第三周', '第四周'],
                    datasets: [
                        {
                            label: '会议',
                            data: [3, 4, 2, 3],
                            borderColor: 'rgba(79, 70, 229, 0.8)',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            borderWidth: 2
                        },
                        {
                            label: '项目',
                            data: [2, 3, 2, 2],
                            borderColor: 'rgba(16, 185, 129, 0.8)',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            borderWidth: 2
                        },
                        {
                            label: '学习',
                            data: [1, 2, 3, 2],
                            borderColor: 'rgba(245, 158, 11, 0.8)',
                            backgroundColor: 'transparent',
                            tension: 0.3,
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                boxWidth: 10,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        }
                    }
                }
            });
            
            // 高效时段分析图表
            const timeEfficiencyCtx = document.getElementById('timeEfficiencyChart').getContext('2d');
            new Chart(timeEfficiencyCtx, {
                type: 'bar',
                data: {
                    labels: ['6-9点', '9-12点', '12-15点', '15-18点', '18-21点', '21-24点'],
                    datasets: [{
                        label: '效率指数',
                        data: [60, 95, 75, 85, 70, 45],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(16, 185, 129, 0.6)',
                            'rgba(249, 115, 22, 0.6)',
                            'rgba(16, 185, 129, 0.6)',
                            'rgba(59, 130, 246, 0.6)',
                            'rgba(156, 163, 175, 0.6)'
                        ],
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return '效率: ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });
            
            // 添加数据加载动画效果
            document.querySelectorAll('.bg-white.rounded-lg.shadow').forEach(card => {
                card.classList.add('animate-pulse-light');
                setTimeout(() => {
                    card.classList.remove('animate-pulse-light');
                }, 1000);
            });
        }
        
        // 添加自定义日期选择功能
        const dateSelect = document.querySelector('select');
        dateSelect.addEventListener('change', function() {
            if (this.value === 'custom') {
                // 显示自定义日期选择器
                const customDatePicker = document.createElement('div');
                customDatePicker.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                customDatePicker.innerHTML = `
                    <div class="bg-white rounded-lg w-full max-w-md mx-4 p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">选择日期范围</h3>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">开始日期</label>
                                <input type="date" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">结束日期</label>
                                <input type="date" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-300">
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button class="px-4 py-2 text-gray-700 mr-2 cancel-btn">取消</button>
                            <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors apply-btn">应用</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(customDatePicker);
                
                // 添加事件监听
                customDatePicker.querySelector('.cancel-btn').addEventListener('click', function() {
                    document.body.removeChild(customDatePicker);
                    dateSelect.value = 'month'; // 重置为默认值
                });
                
                customDatePicker.querySelector('.apply-btn').addEventListener('click', function() {
                    const startDate = customDatePicker.querySelector('input[type="date"]:first-of-type').value;
                    const endDate = customDatePicker.querySelector('input[type="date"]:last-of-type').value;
                    
                    if (startDate && endDate) {
                        // 应用自定义日期范围，重新加载数据
                        document.body.removeChild(customDatePicker);
                        
                        // 显示加载中状态
                        document.querySelectorAll('.bg-white.rounded-lg.shadow').forEach(card => {
                            card.classList.add('animate-pulse-light');
                        });
                        
                        // 模拟数据加载
                        setTimeout(() => {
                            document.querySelectorAll('.bg-white.rounded-lg.shadow').forEach(card => {
                                card.classList.remove('animate-pulse-light');
                            });
                            // 这里可以添加实际的数据刷新逻辑
                        }, 1000);
                    }
                });
            } else {
                // 处理其他时间范围选择
                // 显示加载中状态
                document.querySelectorAll('.bg-white.rounded-lg.shadow').forEach(card => {
                    card.classList.add('animate-pulse-light');
                });
                
                // 模拟数据加载
                setTimeout(() => {
                    document.querySelectorAll('.bg-white.rounded-lg.shadow').forEach(card => {
                        card.classList.remove('animate-pulse-light');
                    });
                    // 这里可以添加实际的数据刷新逻辑
                }, 800);
            }
        });
        
        // 添加导出报告功能
        const exportBtn = document.querySelector('button.bg-indigo-100');
        exportBtn.addEventListener('click', function() {
            // 创建导出选项弹窗
            const exportOptions = document.createElement('div');
            exportOptions.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            exportOptions.innerHTML = `
                <div class="bg-white rounded-lg w-full max-w-md mx-4 p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">导出报告</h3>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2">报告格式</label>
                        <div class="grid grid-cols-3 gap-3">
                            <div class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 format-option" data-format="pdf">
                                <i class="fas fa-file-pdf text-red-500 text-xl mr-2"></i>
                                <span>PDF</span>
                            </div>
                            <div class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 format-option" data-format="excel">
                                <i class="fas fa-file-excel text-green-600 text-xl mr-2"></i>
                                <span>Excel</span>
                            </div>
                            <div class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-indigo-50 format-option" data-format="csv">
                                <i class="fas fa-file-csv text-indigo-500 text-xl mr-2"></i>
                                <span>CSV</span>
                            </div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-medium mb-2">包含内容</label>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input type="checkbox" id="includeCharts" class="h-4 w-4 text-indigo-600 rounded" checked>
                                <label for="includeCharts" class="ml-2 text-gray-700 text-sm">
                                    包含图表
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="includeRawData" class="h-4 w-4 text-indigo-600 rounded" checked>
                                <label for="includeRawData" class="ml-2 text-gray-700 text-sm">
                                    包含原始数据
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="includeSummary" class="h-4 w-4 text-indigo-600 rounded" checked>
                                <label for="includeSummary" class="ml-2 text-gray-700 text-sm">
                                    包含分析总结
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end">
                        <button class="px-4 py-2 text-gray-700 mr-2 cancel-export-btn">取消</button>
                        <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors confirm-export-btn">
                            <i class="fas fa-download mr-2"></i>导出
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(exportOptions);
            
            // 添加格式选择高亮
            const formatOptions = exportOptions.querySelectorAll('.format-option');
            formatOptions.forEach(option => {
                option.addEventListener('click', function() {
                    formatOptions.forEach(opt => opt.classList.remove('bg-indigo-50', 'border-indigo-500'));
                    this.classList.add('bg-indigo-50', 'border-indigo-500');
                });
            });
            
            // 添加取消按钮事件
            exportOptions.querySelector('.cancel-export-btn').addEventListener('click', function() {
                document.body.removeChild(exportOptions);
            });
            
            // 添加确认导出按钮事件
            exportOptions.querySelector('.confirm-export-btn').addEventListener('click', function() {
                // 获取选中的格式
                const selectedFormat = exportOptions.querySelector('.format-option.bg-indigo-50')?.dataset.format || 'pdf';
                const includeCharts = exportOptions.querySelector('#includeCharts').checked;
                const includeRawData = exportOptions.querySelector('#includeRawData').checked;
                const includeSummary = exportOptions.querySelector('#includeSummary').checked;
                
                // 关闭弹窗
                document.body.removeChild(exportOptions);
                
                // 显示导出成功提示
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center';
                toast.innerHTML = `
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>报告已成功导出为${selectedFormat.toUpperCase()}格式</span>
                `;
                document.body.appendChild(toast);
                
                // 3秒后自动关闭提示
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 3000);
            });
        });
    </script>

    <!-- 添加自定义样式 -->
    <style>
        .animate-pulse-light {
            animation: pulse-light 1.5s infinite;
        }
        
        @keyframes pulse-light {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        /* 自定义滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* 图表悬停效果 */
        canvas {
            transition: all 0.3s ease;
        }
        
        canvas:hover {
            transform: scale(1.02);
        }
    </style>
</body>
</html>